# –ü–ª–∞–Ω –º—ñ–≥—Ä–∞—Ü—ñ—ó –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É (–∞—É–¥–∏—Ç —Å—Ç–∞—Ä–∏—Ö ‚Üí –Ω–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç —Ñ—ñ–∫—Å—É—î –∞–Ω–∞–ª—ñ–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É —Ç–∞ –ø–µ—Ä–µ–ª—ñ–∫ –¥–æ—Ä–æ–±–æ–∫ –¥–ª—è –ø–æ–≤–Ω–æ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó —É –Ω–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É `app/modules/client`.

## 1) –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω
- –ú–æ–¥—É–ª—å `client/services/authentication` –ø—Ä–∞—Ü—é—î (—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è + –ø—Ä–æ—Ñ—ñ–ª—å –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ).
- –°—Ç–∞—Ä—ñ –∫–ª—ñ—î–Ω—Ç—Å—å–∫—ñ –º–æ–¥—É–ª—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω—ñ —É `app/main.py`, –∞–ª–µ –∑–∞–ª–∏—à–µ–Ω—ñ –¥–ª—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—É.

## 2) –©–æ –±—É–ª–æ —ñ —â–æ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ
- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è/–ª–æ–≥—ñ–Ω: —î (–∫–æ–Ω—Ç–∞–∫—Ç + —Ä—É—á–Ω–∏–π –≤–≤—ñ–¥, owner ‚Üí ADMIN, —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –Ω–∞ `/start`).
- –ü—Ä–æ—Ñ—ñ–ª—å: –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∏–π; –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ ¬´–ù–∞–∑–∞–¥¬ª/–æ—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞–Ω—ñ–≤ —É –ø—ñ–¥–ø—Ä–æ—Ü–µ—Å–∞—Ö —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è.
- –ü–æ—à—É–∫ –∞–≤—Ç–æ: –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —É `client/services/vehicle_search` (—ñ–Ω–ª–∞–π–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è, ¬´–ù–∞–∑–∞–¥¬ª).
- –ó–±–µ—Ä–µ–∂–µ–Ω—ñ: —è–∫—â–æ —î —É –ë–î ‚Äî –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —É `client/services/saved` (—Å–ø–∏—Å–æ–∫, –≤–∏–¥–∞–ª–µ–Ω–Ω—è, –ø–µ—Ä–µ—Ö–æ–¥–∏ –¥–æ –¥–µ—Ç–∞–ª–µ–π).
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è/—Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è: –∑–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ ‚Äî `client/services/communication`.
- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è: ¬´–ü—Ä–æ –∫–æ–º–ø–∞–Ω—ñ—é¬ª, ¬´–ö–æ–Ω—Ç–∞–∫—Ç–∏¬ª, ¬´–î–æ–ø–æ–º–æ–≥–∞¬ª ‚Üí `client/services/information` (—Å—Ç–∞—Ç–∏—á–Ω—ñ —ñ–Ω–ª–∞–π–Ω –µ–∫—Ä–∞–Ω–∏).

## 3) FSM —ñ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
- –ù–∞ –≤–µ—Ä—Ö–Ω—ñ—Ö –µ–∫—Ä–∞–Ω–∞—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ —Ç–∞ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ–≥–æ –º–µ–Ω—é —Ä–æ–±–∏—Ç–∏ `state.clear()`.
- –î–ª—è –±–∞–≥–∞—Ç–æ–∫—Ä–æ–∫–æ–≤–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ ‚Äî `StatesGroup` + `StateFilter` —Ç–∞ ¬´–ù–∞–∑–∞–¥ –Ω–∞ –∫—Ä–æ–∫¬ª.
- –°—Ç–∞—Ç–∏—á–Ω—ñ —ñ–Ω–ª–∞–π–Ω –µ–∫—Ä–∞–Ω–∏ –±–µ–∑ FSM –∞–±–æ –∑ –æ—á–∏—â–µ–Ω–Ω—è–º —Å—Ç–∞–Ω—É –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º.

## 4) –î–æ—Å—Ç—É–ø —ñ –æ–±–º–µ–∂–µ–Ω–Ω—è
- `ActiveUserGuardMiddleware` –±–ª–æ–∫—É—î –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –≥–ª–æ–±–∞–ª—å–Ω–æ.
- –†–æ–ª—ñ: –∞–¥–º—ñ–Ω–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ `/admin` (–≤–∂–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ); –∫–ª—ñ—î–Ω—Ç—Å—å–∫–µ –º–µ–Ω—é –¥–ª—è –≤—Å—ñ—Ö –æ–¥–Ω–∞–∫–æ–≤–µ.

## 5) –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —É –≥–æ–ª–æ–≤–Ω–µ —ñ–Ω–ª–∞–π–Ω-–º–µ–Ω—é –∫–ª—ñ—î–Ω—Ç–∞
- –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫–∏:
  - ¬´üîç –ü–æ—à—É–∫ –∞–≤—Ç–æ¬ª ‚Üí `client/services/vehicle_search`.
  - ¬´üìã –ú–æ—ó –∑–±–µ—Ä–µ–∂–µ–Ω—ñ¬ª ‚Üí `client/services/saved` (—è–∫—â–æ —î).
  - ¬´üí¨ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è¬ª ‚Üí `client/services/communication` (–∞–±–æ —Ç–∏–º—á–∞—Å–æ–≤–∏–π stub).
  - ¬´üè¢ –ü—Ä–æ –∫–æ–º–ø–∞–Ω—ñ—é¬ª, ¬´üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏¬ª, ¬´‚ùì –î–æ–ø–æ–º–æ–≥–∞¬ª ‚Üí `client/services/information`.
  - ¬´üë§ –ü—Ä–æ—Ñ—ñ–ª—å¬ª ‚Üí –≤–∂–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∏–π –º–æ–¥—É–ª—å (–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ ¬´–ù–∞–∑–∞–¥¬ª/`state.clear()`).

## 6) –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —Ç–∞ —É—Ç–∏–ª—ñ—Ç–∏
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `DatabaseManager` –Ω–∞ –º–µ—Ç–æ–¥–∏ –¥–ª—è –ø–æ—à—É–∫—É/–∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö/–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å; –¥–æ–¥–∞—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ, —è–∫—â–æ –±—Ä–∞–∫—É—î.
- –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –ø–æ–ª—è (–≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è/–ø—Ä–æ–¥–∞–≤–µ—Ü—å) –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —É –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏—Ö –º–æ–¥—É–ª—è—Ö.

## 7) –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ (—Ä–æ–±–æ—Ç–∏)
1) –°—Ç–≤–æ—Ä–∏—Ç–∏ `client/services/vehicle_search` (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è, ¬´–ù–∞–∑–∞–¥¬ª).
2) –î–æ–¥–∞—Ç–∏ `client/services/saved` (–∑–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ñ—ñ—á—ñ —É –ë–î).
3) –î–æ–¥–∞—Ç–∏ `client/services/communication` (–ø—Ä–æ—Å—Ç–∏–π –ø–æ—Ç—ñ–∫ + ¬´–ù–∞–∑–∞–¥¬ª) –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ.
4) –î–æ–¥–∞—Ç–∏ `client/services/information` (—Å—Ç–∞—Ç–∏—á–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ + ¬´–ù–∞–∑–∞–¥¬ª).
5) –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø—ñ–¥–ø—Ä–æ—Ü–µ—Å–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é: —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–µ ¬´–ù–∞–∑–∞–¥¬ª + `state.clear()` –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ —É –º–µ–Ω—é.
6) –ê—É–¥–∏—Ç –≤—Å—ñ—Ö ¬´–ù–∞–∑–∞–¥¬ª —É –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏—Ö —Å–µ—Ä–≤—ñ—Å–∞—Ö: –Ω–µ –ª–∏—à–∞—Ç–∏ —Å—Ç–∞–Ω—ñ–≤.
7) Smoke-—Ç–µ—Å—Ç–∏: `/start`, –º–µ–Ω—é, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –ø—Ä–æ—Ñ—ñ–ª—å, –ø–æ—à—É–∫, saved.

## 8) –†–∏–∑–∏–∫–∏
- –†–æ–∑–º—ñ—Ä/—É–∑–≥–æ–¥–∂–µ–Ω—ñ—Å—Ç—å `callback_data` –¥–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó/—Ñ—ñ–ª—å—Ç—Ä—ñ–≤.
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤–≤–µ–¥–µ–Ω—å (–∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –ø—ñ–¥—Ö—ñ–¥ –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—ó —è–∫ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω—É).
- –£–Ω–∏–∫–∞—Ç–∏ —Ü–∏–∫–ª—ñ—á–Ω–∏—Ö —ñ–º–ø–æ—Ä—Ç—ñ–≤ –º—ñ–∂ —Å–µ—Ä–≤—ñ—Å–∞–º–∏ (–¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—å —à–∞—Ä—ñ–≤ `core/services/shared`).

