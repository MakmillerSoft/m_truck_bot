# üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –¥–µ–ø–ª–æ—é M-Truck Bot

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

### –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è
```
/root/apps/m_truck_bot/
‚îú‚îÄ‚îÄ app/                    # –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–¥ –¥–æ–¥–∞—Ç–∫—É
‚îú‚îÄ‚îÄ data/                   # –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö SQLite
‚îÇ   ‚îî‚îÄ‚îÄ truck_bot.db       # –§–∞–π–ª –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ .venv/                 # –í—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è Python (–Ω–µ –≤ Git)
‚îú‚îÄ‚îÄ .env                   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (—Ç–æ–∫–µ–Ω–∏, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
‚îú‚îÄ‚îÄ .git/                  # Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
‚îú‚îÄ‚îÄ requirements.txt       # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

### Systemd –°–µ—Ä–≤—ñ—Å
- **–ù–∞–∑–≤–∞ —Å–µ—Ä–≤—ñ—Å—É:** `truck-bot.service`
- **–§–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:** `/etc/systemd/system/truck-bot.service`
- **–°—Ç–∞—Ç—É—Å:** Enabled (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞)
- **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á:** root

---

## üì§ –î–µ–ø–ª–æ–π –Ω–∞ GitHub

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–º—ñ–Ω –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç—É
cd D:\Project\m_truck_bot

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
git status

# –î–æ–¥–∞—Ç–∏ –≤—Å—ñ –∑–º—ñ–Ω–∏
git add -A

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º—ñ—Ç
git commit -m "–û–ø–∏—Å –∑–º—ñ–Ω"
```

### 2. –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –Ω–∞ GitHub

```bash
# –ü—É—à –Ω–∞ GitHub
git push origin main
```

### –©–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
‚úÖ –í–µ—Å—å –∫–æ–¥ (`app/`)
‚úÖ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (`requirements.txt`)
‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

‚ùå –í–∏–∫–ª—é—á–µ–Ω–æ (–∑–∞—Ö–∏—â–µ–Ω–æ —á–µ—Ä–µ–∑ `.gitignore`):
- `venv/` —Ç–∞ `.venv/` - –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è
- `data/truck_bot.db` - **–±–∞–∑–∞ –¥–∞–Ω–∏—Ö** (–∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ)
- `.env` - **–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑ —Ç–æ–∫–µ–Ω–∞–º–∏** (–∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ)
- `*.db-journal`, `*.db-wal`, `*.db-shm` - —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏ –ë–î
- `__pycache__/` - –∫–µ—à Python
- –õ–æ–≥–∏ —Ç–∞ —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏

**‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:** –ë–î —Ç–∞ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –º—ñ—Å—Ç—è—Ç—å—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ —ñ **–ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—é—Ç—å—Å—è** –ø—Ä–∏ `git pull`!

**GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:** https://github.com/MakmillerSoft/m_truck_bot.git

---

## üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

### ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û: –ó–∞—Ö–∏—Å—Ç –¥–∞–Ω–∏—Ö

**–ë–î —Ç–∞ .env —Ñ–∞–π–ª –ù–ï –≤–∫–ª—é—á–µ–Ω—ñ –≤ Git** (–¥–æ–¥–∞–Ω–æ –≤ `.gitignore`), —Ç–æ–º—É:
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞ –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ **–ù–ï –±—É–¥–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–∞** –ø—Ä–∏ `git pull`
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∏–π `.env` —Ñ–∞–π–ª **–ù–ï –±—É–¥–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–∏–π** –ø—Ä–∏ `git pull`
- ‚úÖ –í—Å—ñ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

**–ê–ª–µ –¥–ª—è –±–µ–∑–ø–µ–∫–∏ –∑–∞–≤–∂–¥–∏ —Ä–æ–±—ñ—Ç—å –±–µ–∫–∞–ø –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º!**

---

### –ú–µ—Ç–æ–¥ 1: –ë–µ–∑–ø–µ—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –±–µ–∫–∞–ø–æ–º (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```bash
# 1. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
ssh root@server2102.server-vps.com

# 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç—É
cd /root/apps/m_truck_bot

# 3. üîí –ó–†–û–ë–ò–¢–ò –ë–ï–ö–ê–ü –ë–î –¢–ê .ENV (–û–ë–û–í'–Ø–ó–ö–û–í–û!)
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É –¥–ª—è –±–µ–∫–∞–ø—ñ–≤ (—è–∫—â–æ –Ω–µ —ñ—Å–Ω—É—î)
mkdir -p /root/apps/backups

# –ë–µ–∫–∞–ø –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∑ –¥–∞—Ç–æ—é —Ç–∞ —á–∞—Å–æ–º
cp data/truck_bot.db /root/apps/backups/truck_bot_$(date +%Y%m%d_%H%M%S).db

# –ë–µ–∫–∞–ø .env —Ñ–∞–π–ª—É –∑ –¥–∞—Ç–æ—é —Ç–∞ —á–∞—Å–æ–º
cp .env /root/apps/backups/.env_$(date +%Y%m%d_%H%M%S)

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –±–µ–∫–∞–ø–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ
ls -lh /root/apps/backups/

# 4. –ó—É–ø–∏–Ω–∏—Ç–∏ –±–æ—Ç–∞ –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
systemctl stop truck-bot

# 5. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–º—ñ–Ω–∏ –∑ GitHub (–ë–î —Ç–∞ .env –ù–ï –±—É–¥—É—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ñ)
git pull origin main

# 6. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –ë–î —Ç–∞ .env –Ω–µ –∑–º—ñ–Ω–∏–ª–∏—Å—è
ls -lh data/truck_bot.db
ls -lh .env

# 7. –û–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ –∑–º—ñ–Ω—é–≤–∞–≤—Å—è requirements.txt)
source .venv/bin/activate
pip install -r requirements.txt

# 8. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
systemctl start truck-bot

# 9. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
systemctl status truck-bot

# 10. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
journalctl -u truck-bot -n 50 --no-pager
```

### –ú–µ—Ç–æ–¥ 2: –®–≤–∏–¥–∫–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (—è–∫—â–æ –≤–ø–µ–≤–Ω–µ–Ω—ñ —â–æ –≤—Å–µ –û–ö)

```bash
# 1. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
ssh root@server2102.server-vps.com

# 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç—É
cd /root/apps/m_truck_bot

# 3. –ó—É–ø–∏–Ω–∏—Ç–∏ –±–æ—Ç–∞
systemctl stop truck-bot

# 4. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–º—ñ–Ω–∏ –∑ GitHub
git pull origin main

# 5. –û–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
source .venv/bin/activate
pip install -r requirements.txt

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
systemctl start truck-bot

# 7. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
systemctl status truck-bot
```

### –ú–µ—Ç–æ–¥ 2: –ü–æ–≤–Ω–µ –ø–µ—Ä–µ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è (—Ç—ñ–ª—å–∫–∏ —è–∫—â–æ git pull –Ω–µ –ø—Ä–∞—Ü—é—î)

**‚ö†Ô∏è –£–í–ê–ì–ê:** –¶–µ–π –º–µ—Ç–æ–¥ –≤–∏–¥–∞–ª—è—î –ø—Ä–æ–µ–∫—Ç —ñ –∫–ª–æ–Ω—É—î –∑–∞–Ω–æ–≤–æ. –û–±–æ–≤'—è–∑–∫–æ–≤–æ –∑—Ä–æ–±—ñ—Ç—å –±–µ–∫–∞–ø!

```bash
# 1. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
ssh root@server2102.server-vps.com

# 2. –ó—É–ø–∏–Ω–∏—Ç–∏ –±–æ—Ç–∞
systemctl stop truck-bot

# 3. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç—É
cd /root/apps/m_truck_bot

# 4. üîí –û–ë–û–í'–Ø–ó–ö–û–í–ò–ô –ë–ï–ö–ê–ü –ë–î –¢–ê .ENV!
mkdir -p /root/apps/backups
cp data/truck_bot.db /root/apps/backups/truck_bot_before_reclone_$(date +%Y%m%d_%H%M%S).db
cp .env /root/apps/backups/.env_before_reclone_$(date +%Y%m%d_%H%M%S)

# 5. –ü–µ—Ä–µ–π—Ç–∏ –≤ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫—É –ø–∞–ø–∫—É
cd /root/apps/

# 6. –ü–µ—Ä–µ–π–º–µ–Ω—É–≤–∞—Ç–∏ —Å—Ç–∞—Ä—É –ø–∞–ø–∫—É (–¥–ª—è –±–µ–∑–ø–µ–∫–∏)
mv m_truck_bot m_truck_bot_old_$(date +%Y%m%d_%H%M%S)

# 7. –ö–ª–æ–Ω—É–≤–∞—Ç–∏ –∑ GitHub
git clone https://github.com/MakmillerSoft/m_truck_bot.git

# 8. –ü–µ—Ä–µ–π—Ç–∏ –≤ –Ω–æ–≤—É –ø–∞–ø–∫—É
cd m_truck_bot

# 9. –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –ë–î —Ç–∞ .env –∑ –±–µ–∫–∞–ø—É
cp /root/apps/backups/truck_bot_before_reclone_*.db data/truck_bot.db
cp /root/apps/backups/.env_before_reclone_* .env

# 10. –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è
python3 -m venv .venv

# 11. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ venv
source .venv/bin/activate

# 12. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt

# 13. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –ë–î —Ç–∞ .env –Ω–∞ –º—ñ—Å—Ü—ñ
ls -lh data/truck_bot.db
ls -lh .env

# 14. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
systemctl start truck-bot

# 15. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
systemctl status truck-bot

# 16. –Ø–∫—â–æ –≤—Å–µ –û–ö, –º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä—É –ø–∞–ø–∫—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
# cd /root/apps/
# rm -rf m_truck_bot_old_*
```

---

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–æ—Ç–æ–º —á–µ—Ä–µ–∑ systemd

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
systemctl start truck-bot

# –ó—É–ø–∏–Ω–∏—Ç–∏ –±–æ—Ç–∞
systemctl stop truck-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
systemctl restart truck-bot

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
systemctl status truck-bot

# –î–∏–≤–∏—Ç–∏—Å—è –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
journalctl -u truck-bot -f

# –õ–æ–≥–∏ –∑–∞ –æ—Å—Ç–∞–Ω–Ω—é –≥–æ–¥–∏–Ω—É
journalctl -u truck-bot --since "1 hour ago"

# –õ–æ–≥–∏ –∑–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
journalctl -u truck-bot --since today

# –û—Å—Ç–∞–Ω–Ω—ñ 100 —Ä—è–¥–∫—ñ–≤ –ª–æ–≥—ñ–≤
journalctl -u truck-bot -n 100
```

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫

```bash
# –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ —Å–µ—Ä–≤–µ—Ä–∞
systemctl enable truck-bot

# –í–∏–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl disable truck-bot

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–æ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl is-enabled truck-bot
```

---

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤

```bash
# –ó–Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å –±–æ—Ç–∞
ps aux | grep python | grep truck

# –ó–Ω–∞–π—Ç–∏ –≤—Å—ñ Python –ø—Ä–æ—Ü–µ—Å–∏
ps aux | grep python

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ screen —Å–µ—Å—ñ—ó
screen -ls
```

### –ö–æ–Ω—Ñ–ª—ñ–∫—Ç "bot instance is running"

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—î –ø–æ–º–∏–ª–∫–∞ –ø—Ä–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç –±–æ—Ç—É:

```bash
# 1. –ó–Ω–∞–π—Ç–∏ –≤—Å—ñ –ø—Ä–æ—Ü–µ—Å–∏ Python
ps aux | grep python

# 2. –ó—É–ø–∏–Ω–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å –±–æ—Ç–∞ (–∑–∞–º—ñ–Ω–∏—Ç–∏ PID)
kill <PID>

# 3. –Ø–∫—â–æ –Ω–µ –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ force kill
kill -9 <PID>

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —á–µ—Ä–µ–∑ systemd
systemctl restart truck-bot
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ .env —Ñ–∞–π–ª
cat /root/apps/m_truck_bot/.env

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
ls -la /root/apps/m_truck_bot/

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö
ls -la /root/apps/m_truck_bot/data/
```

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ systemd —Å–µ—Ä–≤—ñ—Å—É

–§–∞–π–ª: `/etc/systemd/system/truck-bot.service`

```ini
[Unit]
Description=Truck Bot Telegram Bot
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/apps/m_truck_bot
ExecStart=/root/apps/m_truck_bot/.venv/bin/python -m app.main
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ü—ñ—Å–ª—è –∑–º—ñ–Ω–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:
```bash
# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ systemd
systemctl daemon-reload

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
systemctl restart truck-bot
```

---

## üîê –í–∞–∂–ª–∏–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

### –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
- **–•–æ—Å—Ç:** server2102.server-vps.com
- **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á:** root
- **–®–ª—è—Ö –¥–æ –±–æ—Ç–∞:** `/root/apps/m_truck_bot/`

### GitHub
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:** https://github.com/MakmillerSoft/m_truck_bot.git
- **–ì—ñ–ª–∫–∞:** main

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **–¢–∏–ø:** SQLite
- **–§–∞–π–ª:** `/root/apps/m_truck_bot/data/truck_bot.db`
- **–í–∫–ª—é—á–µ–Ω–æ –≤ Git:** ‚ùå –ù–Ü (–∑–∞—Ö–∏—â–µ–Ω–æ —á–µ—Ä–µ–∑ `.gitignore`)
- **‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:** –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –º—ñ—Å—Ç–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ —ñ **–ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î—Ç—å—Å—è** –ø—Ä–∏ `git pull`
- **–ë–µ–∫–∞–ø–∏:** –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `/root/apps/backups/`

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- **–§–∞–π–ª:** `/root/apps/m_truck_bot/.env`
- **–í–∫–ª—é—á–µ–Ω–æ –≤ Git:** ‚ùå –ù–Ü (–∑–∞—Ö–∏—â–µ–Ω–æ —á–µ—Ä–µ–∑ `.gitignore`)
- **‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:** `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –º—ñ—Å—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω–∏ —ñ **–ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î—Ç—å—Å—è** –ø—Ä–∏ `git pull`
- **–¢–æ–∫–µ–Ω –±–æ—Ç–∞:** –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ `.env` (BOT_TOKEN)
- **ID –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞:** –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ `.env` (ADMIN_IDS)
- **–ë–µ–∫–∞–ø–∏:** –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `/root/apps/backups/`

---

## üö® Troubleshooting

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏:
   ```bash
   journalctl -u truck-bot -n 50
   ```

2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å:
   ```bash
   systemctl status truck-bot
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Ä—É—á–Ω—É –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
   ```bash
   cd /root/apps/m_truck_bot
   source .venv/bin/activate
   python -m app.main
   ```

### –ü–æ–º–∏–ª–∫–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–∞–π–ª –ë–î
ls -la /root/apps/m_truck_bot/data/truck_bot.db

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
chmod 644 /root/apps/m_truck_bot/data/truck_bot.db
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è

```bash
# ‚ö†Ô∏è –£–í–ê–ì–ê: git reset --hard –≤–∏–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏!
# –°–ø–æ—á–∞—Ç–∫—É –∑—Ä–æ–±—ñ—Ç—å –±–µ–∫–∞–ø –ë–î —Ç–∞ .env!

# –ñ–æ—Ä—Å—Ç–∫–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –≤–ø–µ–≤–Ω–µ–Ω—ñ)
cd /root/apps/m_truck_bot

# –ë–µ–∫–∞–ø –ø–µ—Ä–µ–¥ –∂–æ—Ä—Å—Ç–∫–∏–º –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
cp data/truck_bot.db /root/apps/backups/truck_bot_before_reset_$(date +%Y%m%d_%H%M%S).db
cp .env /root/apps/backups/.env_before_reset_$(date +%Y%m%d_%H%M%S)

# –ñ–æ—Ä—Å—Ç–∫–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
systemctl stop truck-bot
git fetch --all
git reset --hard origin/main

# –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ .env (—è–∫—â–æ –≤—ñ–Ω –±—É–≤ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–∏–π)
# cp /root/apps/backups/.env_before_reset_* .env

systemctl start truck-bot
```

### –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –±–µ–∫–∞–ø—É

```bash
# –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –ë–î –∑ –±–µ–∫–∞–ø—É
cd /root/apps/m_truck_bot
systemctl stop truck-bot
cp /root/apps/backups/truck_bot_YYYYMMDD_HHMMSS.db data/truck_bot.db
systemctl start truck-bot

# –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ .env –∑ –±–µ–∫–∞–ø—É
cp /root/apps/backups/.env_YYYYMMDD_HHMMSS .env
systemctl restart truck-bot
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

- [ ] –õ–æ–∫–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏ –∑–∞–∫–æ–º—ñ—á–µ–Ω–æ
- [ ] –ó–º—ñ–Ω–∏ –∑–∞–ø—É—à–µ–Ω–æ –Ω–∞ GitHub
- [ ] –ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] **üîí –ó—Ä–æ–±–ª–µ–Ω–æ –±–µ–∫–∞–ø –ë–î** (`cp data/truck_bot.db /root/apps/backups/...`)
- [ ] **üîí –ó—Ä–æ–±–ª–µ–Ω–æ –±–µ–∫–∞–ø .env** (`cp .env /root/apps/backups/...`)
- [ ] –ó—É–ø–∏–Ω–µ–Ω–æ –±–æ—Ç–∞ (`systemctl stop truck-bot`)
- [ ] –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –∑–º—ñ–Ω–∏ (`git pull origin main`)
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —â–æ –ë–î —Ç–∞ .env –Ω–µ –∑–º—ñ–Ω–∏–ª–∏—Å—è
- [ ] –û–Ω–æ–≤–ª–µ–Ω–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- [ ] –ó–∞–ø—É—â–µ–Ω–æ –±–æ—Ç–∞ (`systemctl start truck-bot`)
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —Å—Ç–∞—Ç—É—Å (`systemctl status truck-bot`)
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ –ª–æ–≥–∏ (`journalctl -u truck-bot -n 50`)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –±–æ—Ç–∞ –≤ Telegram

---

## üîß –ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü–æ–≤—ñ–ª—å–Ω–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è –∞–≤—Ç–æ (19+ —Å–µ–∫—É–Ω–¥)

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–≤—ñ–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö –∞–±–æ –º–µ—Ä–µ–∂–µ—é.

**–†—ñ—à–µ–Ω–Ω—è:**
1. –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ —ñ–Ω–¥–µ–∫—Å–∏ –ë–î
2. –î–æ–¥–∞—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
3. –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–µ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó

### –î—É–±–ª—ñ–∫–∞—Ç–∏ –∞–≤—Ç–æ –ø—Ä–∏ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –∫–Ω–æ–ø–∫—É –¥–µ–∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤ —á–µ—Ä–µ–∑ –ø–æ–≤—ñ–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å.

**–†—ñ—à–µ–Ω–Ω—è:**
1. –í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç–∏ —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å –±–æ—Ç–∞
2. –î–æ–¥–∞—Ç–∏ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è

### –ü–æ–º–∏–ª–∫–∞ "wrong file identifier" –ø—Ä–∏ –ø–æ–∫–∞–∑—ñ —Ñ–æ—Ç–æ

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞—Å—Ç–∞—Ä—ñ–ª—ñ –∞–±–æ –Ω–µ–≤–∞–ª—ñ–¥–Ω—ñ file_id —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ–π —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö.

**–†—ñ—à–µ–Ω–Ω—è:**
1. –í–∏–¥–∞–ª–∏—Ç–∏ –∞–≤—Ç–æ –∑ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–º–∏ —Ñ–æ—Ç–æ
2. –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –∞–≤—Ç–æ –∑—ñ —Å–≤—ñ–∂–∏–º–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—è–º–∏
3. –î–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ –¥–ª—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö —Ñ–æ—Ç–æ

---

---

## üíæ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–µ–∫–∞–ø–∞–º–∏

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–µ–∫–∞–ø—É –≤—Ä—É—á–Ω—É

```bash
# –ë–µ–∫–∞–ø –ë–î
cp /root/apps/m_truck_bot/data/truck_bot.db /root/apps/backups/truck_bot_$(date +%Y%m%d_%H%M%S).db

# –ë–µ–∫–∞–ø .env
cp /root/apps/m_truck_bot/.env /root/apps/backups/.env_$(date +%Y%m%d_%H%M%S)
```

### –ü–µ—Ä–µ–≥–ª—è–¥ –±–µ–∫–∞–ø—ñ–≤

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –±–µ–∫–∞–ø—ñ–≤ –ë–î
ls -lh /root/apps/backups/truck_bot_*.db

# –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –±–µ–∫–∞–ø—ñ–≤ .env
ls -lh /root/apps/backups/.env_*

# –†–æ–∑–º—ñ—Ä –ø–∞–ø–∫–∏ –∑ –±–µ–∫–∞–ø–∞–º–∏
du -sh /root/apps/backups/
```

### –û—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –±–µ–∫–∞–ø—ñ–≤

```bash
# –í–∏–¥–∞–ª–∏—Ç–∏ –±–µ–∫–∞–ø–∏ —Å—Ç–∞—Ä—ñ—à—ñ –∑–∞ 30 –¥–Ω—ñ–≤
find /root/apps/backups/ -name "truck_bot_*.db" -mtime +30 -delete
find /root/apps/backups/ -name ".env_*" -mtime +30 -delete
```

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 21 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025

